## 안전하지 않은 문자
URL은 모든 리소스가 모든 인터넷 프로토콜에서 호환될 수 있도록 설계되었다. 모든 프로토콜이 데이터를 전송하기 위해 서로 다른 장치를 갖고 있기 때문에, 어떤 인터넷 프로토콜을 통해서든 **안전하게 전송 될 수 있도록 URL을 설계**하는 것은 중요했다. 안전한 전송은 **정보가 유실될 위험 없이 URL을 전송할 수 있는 것**을 말한다. 

URL 설계자들은 모든 인터넷 프로토콜로 URL이 전송될 수 있길 바랬고, 가독성도 있기를 바랬다. 따라서 출력이 되지 않거나, 보이지 않는 문자를 사용할 수 있다고 해서, 그리고 그 문자들이 변환된다 하더라도 URL에서 그런 문자들을 사용하는 것은 금지되었다.

여기에 URL은 완벽해야 했다. 알파벳 이외의 문자들이 포함되더라도 이스케이프라는 기능을 추가해 안전하지 않은 문자를 안전한 문자로 인코딩 할 수 있게 했다.

### URL 문자 집합
컴퓨터 시스템의 기본 문자 집합은 보통 영어 중심으로 설정되어 있다. 따라서 많은 컴퓨터 애플리케이션들이 [US-ASCII](https://ko.wikipedia.org/wiki/ASCII)문자 집합을 사용한다. US-ASCII는 만들어진지 오래되었기 때문에 적은 수의 문자만 포함한다. 비라틴계 언어에 존재하는 문자들까지 지원하기에는 부족하다. 
따라서 URL 설계자들은 URL에 이스케이프 문자열을 쓸 수 있게 설계했다. 이스케이프 문자열은 US-ASCII에서 사용이 금지된 문자들로, 특정 문자나 데이터를 인코딩 할 수 있게 함으로써 이동성과 완성도를 높였다.

### 인코딩 체계
URL은 안전하지 않은 문자들을 표한하기 위한 인코딩 방법으로 `%`기호를 사용해 ASCII 코드로 표현되는 두 개의 16진수 숫자로 이루어진 '이스케이프'문자로 바꾼다.
|문자|ASCII 코드|URL 예|
|:-:|:-:|:-:|
|~|126 (0x7E)|http://www.joes-hardware.com/%7Ejoe|
|빈 문자|32(0x20)|http://www.joes-hardware.com/more%20tools.html|
|%|37(0x25)|http://www.joes-hardware.com/100%25satisfaction.html|

### 문자 제한
|문자|선점 및 제한|
|:-:|:-:|
|%|인코딩된 문자에 사용할 이스케이프 토큰으로 선점|
|/|경로 컴포넌트에 있는 경로 세그먼트를 나누는 용도로 선점| 
|.|경로 컴포넌트에서 선점|
|..|경로 컴포넌트에서 선점|
|#|프래그먼트의 구획 문자로 선점|
|?|질의 문자열의 구획 문자로 선점|
|;| 파라미터의 구획 문자로 선점|
|:|스킴, 사용자 이름/ 비밀번호, 호스트/포트의 구획 문자로 선점 |
|$, +|선점|
|@ & =|특정 스킴에서 특별한 의미가 있기 때문에 선점|
|{ } `|` \ ~ [] `|게이트웨이와 같은 전송 에이전트에서 불안전하게 다루기 떄문에 제한됨|
|<> "|안전하지 않음. 웹 문서에서 URL을 구분 지어 표시하듯이,<br> URL 범위 밖에서 역할이 있는 문자이기 떄문에 반드시 인코딩이 필요|
|0x00-0x1F, 0x7F|제한된. 이 16진수 범위에 속하는 문자들은 인쇄되지 않는 US-ASCII 문자다.|
| > 0x7F|제한된. 이 16진수 범위에 속하는 문자들은 7비트 US-ASCII 문자가 아니다.|

### 좀 더 알아보기
애플리케이션은 정해진 방식대로 구현해야 한다. 어떤 애플리케이션에서 어떤 URL을 보내든지, 그 전에 클라이언트 애플리케이션에서 안전하지 않거나 제한된 문자를 변환하는 것이 좋다.

입력받은 URL에서 어떤 문자를 인코딩해야 하는지 결정하는 데는 브라우저같이 사용자로부터 최초로 URL을 입력받는 애플리케이션에서 하는것이 가장 적절하다. URL을 구성하는 각 컴포넌트마다 사용할 수 있거나 없는 문자들이 있을 것이 있고, 어떤 문자는 스킴에 따라 가용성이 달라지기 때문에 해당 문자들을 직접 입력받는 애플리케이션이야 말로 어떤 문자를 일코딩해야 하는지 결정하기 가장 좋은 위치다.

극단적으로 애플리케이션이 모든 문자를 인코딩하는 방법도 있지만, 이미 안전한 문자들을 인코딩하지 않는 애플리케이션도 있기 때문에 오동작을 일으킬 수 있다.

URL을 해석하는 애플리케이션은 그것을 처리하기 전에 URL을 디코드 해야한다.
